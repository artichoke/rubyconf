<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta property="og:title" content="Artichoke is a Ruby Made with Rust"><meta property="og:site_name" content="artichoke.github.io"><meta property="og:url" content="https://artichoke.github.io/rubyconf/2019/"><meta property="og:description" content="Presentation from RubyConf 2019"><meta property="og:type" content="website"><meta property="og:image" content="https://artichoke.github.io/rubyconf/artichoke-logo.png"><title>Artichoke is a Ruby Made with Rust ğŸ’ğŸ¦€</title><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#b91d47"><meta name="msapplication-TileColor" content="#b91d47"><meta name="theme-color" content="#ffffff"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-158900370-3"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-158900370-3")</script><link href="/rubyconf/deck.2019.899d951981aa6b3378c5.css" rel="stylesheet"></head><body><div class="reveal"><div class="slides"><section data-markdown><textarea data-template>
            ## Artichoke is a Ruby Made with Rust

ğŸ’ğŸ¦€ğŸš€

[ğŸ¢ artichoke.github.io/rubyconf/2019](https://artichoke.github.io/rubyconf/2019)  
[ğŸ¡ artichoke.run](https://artichoke.run)

          </textarea></section><section><h3>Artichoke Ruby</h3><iframe class="playground" src="https://artichoke.run/?embed#%23%20frozen_string_literal%3A%20true%0A%0Arequire%20'forwardable'%0Arequire%20'json'%0A%0Aclass%20Properties%0A%20%20extend%20Forwardable%0A%20%20def_delegators%20%3A%40properties%2C%20%3A%5B%5D%2C%20%3A%5B%5D%3D%2C%20%3Ato_json%0A%0A%20%20def%20initialize(name)%0A%20%20%20%20%40name%20%3D%20name%0A%20%20%20%20%40properties%20%3D%20%7B%7D%0A%20%20end%0Aend%0A%0Aartichoke%20%3D%20Properties.new('Artichoke%20Ruby')%0Aartichoke%5B%3Alanguage%5D%20%3D%20'Ruby'%0Aartichoke%5B%3Aimplementation%5D%20%3D%20'Artichoke'%0Aartichoke%5B%3Atarget%5D%20%3D%20'wasm'%0Aartichoke%5B%3Aemoji%5D%20%3D%20'%F0%9F%92%8E'%0A%0Aserialized%20%3D%20JSON.pretty_generate(artichoke)%0A%0Aputs%20serialized%20if%20serialized%20%3D~%20%2F%F0%9F%92%8E%2F"></iframe></section><section><h3>Why Build a Ruby? ğŸ—ğŸ’</h3><iframe frameborder="0" scrolling="no" marginheight="0" marginwidth="0" width="544" height="306" type="text/html" src="https://www.youtube.com/embed/qybUFnY7Y8w?autoplay=0&fs=0&iv_load_policy=3&showinfo=0&rel=0&cc_load_policy=0&start=0&end=0&mute=1"></iframe></section><section><h3>Contributing</h3><p><a href="https://github.com/artichoke"><img class="github-logo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNTE3OEEzMjk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyQTQxNEFCQzk5QTExMUUyOUExNUJDMTA0NkE4OTA0RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTMwOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTMxOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+R7ClIwAADR5JREFUeNrsnQuw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" alt="GitHub"> github.com/artichoke</a></p><p><a href="https://artichoke.run">ğŸ¡ artichoke.run</a></p><p><a class="IssueLabel" style="background-color:#02e10c;color:#000" title="Call for participation: Experience needed to fix: Easy / not much." href="https://github.com/artichoke/artichoke/labels/E-easy">E-easy </a><a class="IssueLabel" style="background-color:#02e10c;color:#000" title="Call for participation: Help is requested to fix this issue." href="https://github.com/artichoke/artichoke/labels/E-help-wanted">E-help-wanted</a></p></section><section data-markdown><textarea data-template>
            ### Goals

- Build for WebAssembly ğŸ¯
- Execute untrusted code ğŸ”¦ğŸ”
- Package single-binary apps ğŸ§³

          </textarea></section><section data-markdown><textarea data-template>
            #### WebAssembly

- Sandboxed by default ğŸ–
- Multi-platform ğŸ‘»ğŸ‘½ğŸ‘¾ğŸ¤–
- Ruby in the browser ğŸ­

          </textarea></section><section data-markdown><textarea data-template>
            #### Untrusted Code

"Code execution as a service"  
ğŸ²ğŸ°

          </textarea></section><section data-markdown><textarea data-template>
            #### Why Execute Untrusted Code?

- [Mozilla Firefox](https://developer.mozilla.org/en-US/docs/WebAssembly) ğŸ”¥ğŸ¦Š
- [Godot scripting](https://docs.godotengine.org/en/3.1/getting_started/step_by_step/scripting.html)
  ğŸ•¹ğŸ®
- [Shopify Scripts](https://github.com/Shopify/shopify-scripts) ğŸ›ğŸ›’
- [Redis `EVAL`](https://redis.io/commands/eval) ğŸ§±ğŸ’ˆ

          </textarea></section><section><section data-markdown><textarea data-template>
            #### Single Binary Apps

Dead simple, hermetic deployments ğŸ±

          </textarea></section><section data-markdown><textarea data-template>
            #### Single Binary Apps

Apps are hard to package ğŸ“¦  
especially for the web ğŸ’

          </textarea></section><section data-markdown><textarea data-template>
            #### Single Binary Apps

- Ruby, stdlib, gems load shared objects â—ï¸
- Stdlib, gems, apps load Ruby code ğŸ’”
- Apps load Ruby code, config, and assets ğŸ’¥

          </textarea></section></section><section data-markdown><textarea data-template>
            ### Goals

- Build for WebAssembly ğŸ¯
- Execute untrusted code ğŸ”¦ğŸ”
- Package single-binary apps ğŸ§³

          </textarea></section><section data-markdown><textarea data-template>
            ### Artichoke ğŸ’â¤ï¸ğŸ¦€ Rust

          </textarea></section><section><section data-markdown><textarea data-template>
            #### WebAssembly Compilation

Build on WebAssembly targets with a  
native compiler toolchain ğŸ› 

          </textarea></section><section data-markdown><textarea data-template>
            #### Building WebAssembly

```shell
rustup add target wasm32-unknown-emscripten
cargo build --release --target wasm32-unknown-emscripten
```

          </textarea></section></section><section><h4>Deep Web Integration</h4><iframe class="playground" src="https://artichoke.run/?embed#%23%20frozen_string_literal%3A%20true%0A%0A%3C%3CUSAGE%0AThis%20program%20is%20a%20quine%20built%20using%0AArtichoke%20Ruby%20and%20a%20gem%20based%20on%20stdweb.%0AUSAGE%0A%0Arequire%20'uri'%0Arequire%20'artichoke%2Fweb'%0A%0Alocation%20%3D%20Artichoke%3A%3AWeb%3A%3AWindow.location%0Acontents%20%3D%20location.hash%5B1..-1%5D%0Aputs%20URI.decode(contents)"></iframe></section><section><section data-markdown><textarea data-template>
            #### Static Linking

Drop a single binary in `FROM scratch` Docker container and run a full Rails app
ğŸ’ğŸ³

          </textarea></section><section data-markdown><textarea data-template>
            #### Static Linking

Statically linked dependencies enable  
single binary app distributions ğŸ“»

          </textarea></section><section data-markdown><textarea data-template>
            #### Static Linking

Statically linked libc enables  
single binary app distributions ğŸ¥”

<hr style="width:50%">

`x86_64-unknown-linux-musl`

          </textarea></section></section><section data-markdown><textarea data-template>
            ### From Rust to Ruby

ğŸ¦€ â¡ï¸ ğŸ’

          </textarea></section><section data-markdown><textarea data-template>
            ### Ruby Core

```ruby
ENV['DRY_RUN'] = '0'
ary = Array.new(1024, 'Artichoke Ruby')
fixture = File.read(
  'artichoke-frontend/ruby/fixtures/learnxinyminutes.txt'
)
/function/.match(fixture)
```

          </textarea></section><section data-markdown><textarea data-template>
            ### Ruby Core

- Multiple implementations ğŸ˜ºğŸ˜¸ğŸ˜»
- Configurable at compile time ğŸ˜

          </textarea></section><section><section><h4>Untrusted <code>ENV</code> Access</h4><iframe class="playground" src="https://artichoke.run/?embed#%23%20frozen_string_literal%3A%20true%0A%0Aputs%20%22%23%7BENV.size%7D%20keys%20in%20%23%7BENV%7D%22%0Aputs%20%22ENV%20%3D%20%23%7BENV.to_h%7D%22%0A%0AENV%5B'CONFERENCE'%5D%20%3D%20'RubyConf'%0A%0Aputs%20%22ENV%20%3D%20%23%7BENV.to_h%7D%22"></iframe></section><section data-markdown><textarea data-template>
            #### `ENV`

- System backend â†”ï¸ OS ğŸ–¥
- In-memory backend â†”ï¸ `HashMap` ğŸŸ

          </textarea></section><section data-markdown><textarea data-template>
            #### In-Memory `ENV`

Build on WebAssembly targets that  
do not have a system environ ğŸ”§

          </textarea></section><section data-markdown><textarea data-template>
            #### In-Memory `ENV`

Run untrusted code by  
restricting system access â›“

          </textarea></section></section><section><section><h4>Capturable <code>IO</code></h4><iframe class="playground" src="https://artichoke.run/?embed#%23%20frozen_string_literal%3A%20true%0A%0Awarn%20%22That's%20no%20moon.%22%0A%0A(1..5).each%20do%20%7Cpilot%7C%0A%20%20print%20%22Red%20%23%7Bpilot%7D%20standing%20by%20...%22%2C%20%22%5Cn%22%0Aend%0A%0Aputs%20''%2C%20'Lock%20S-foils%20in%20attack%20position.'"></iframe></section><section data-markdown><textarea data-template>
            #### `IO`

- Capturable `$stdout` and `$stderr` ğŸ§¤
- Optional `IO#popen` ğŸšª
- Optional `Kernel#open("|date")` ğŸ“…

          </textarea></section><section data-markdown><textarea data-template>
            #### Capturable `IO`

Build on WebAssembly targets that  
do not have file descriptors ğŸ”§

          </textarea></section><section data-markdown><textarea data-template>
            #### Disabled `IO` pipes

Run untrusted code by disabling  
subprocess capabilities â›“

          </textarea></section></section><section><section><h4>Virtual <code>Kernel#require</code></h4><iframe class="playground" src="https://artichoke.run/?embed#%23%20frozen_string_literal%3A%20true%0A%0Arequire%20'json'%0A%0Ajson%20%3D%20%7B%20backend%3A%20'memory'%20%7D.to_json%0A%0Aputs%20json"></iframe></section><section data-markdown><textarea data-template>
            #### `File` Access

- System backend â†”ï¸ OS ğŸ—„ğŸ“
- In-memory backend â†”ï¸ `HashMap` ğŸ—ƒğŸ—‚

          </textarea></section></section><section><section><h4>Pure Rust <code>Regexp</code></h4><iframe class="playground" src="https://artichoke.run/?embed#%23%20frozen_string_literal%3A%20true%0A%0Ahaystack%20%3D%20%3C%3C-HAYSTACK%0A%20%20%5B%20ruby_koans%20%5D%20%24%20ruby%20path_to_enlightenment.rb%0A%20%20(in%20%2FUsers%2Fperson%2Fdev%2Fruby_koans)%0A%20%20cd%20koans%0A%0A%20%20Thinking%20AboutAsserts%0A%20%20test_assert_truth%20has%20damaged%20your%20karma.%0A%0A%20%20You%20have%20not%20yet%20reached%20enlightenment%20...%0A%20%20%3Cfalse%3E%20is%20not%20true.%0AHAYSTACK%0A%0Amatch%20%3D%20%2Fruby%20(%5Ba-zA-Z0-9_%5D%2B%5C.rb)%2F.match(haystack)%0A%0Aputs%20%22To%20walk%20the%20path%2C%20run%3A%22%2C%20%22%24%20ruby%20%23%7Bmatch%5B1%5D%7D%22"></iframe></section><section data-markdown><textarea data-template>
            #### `Regexp`

- Pure Rust engine for WebAssembly ğŸ’§
- Oniguruma engine for compatibility ğŸš—

          </textarea></section></section><section data-markdown><textarea data-template>
            ### From Core to Fast

ğŸğŸ’¨ ğŸğŸ

<small>Benchmarks run on AWS `c5.2xlarge` ğŸ–¥ ğŸ–¥</small>

          </textarea></section><section><section data-markdown><textarea data-template>
              ### `String#scan`

`String` pattern over 6.8MB of Unicode text ğŸ“š

```ruby
raise unless $fixture.scan('http://').length == 3539
raise unless $fixture.scan('https://').length == 1865
raise unless $fixture.scan('è¡¨è¾¾å¼').length == 120
raise unless $fixture.scan("\r\n").empty?
```

            </textarea></section><section><h3><code>String#scan</code></h3><iframe src="/rubyconf/970907ce3a0cddcf6f8a250f3eb9a83d.txt" class="playground"></iframe></section></section><section><h3><code>String#scan</code></h3><div class="stat-container"><div class="stat-box stat-box-win"><div class="stat-box-type">Artichoke</div><div class="stat-box-number">66</div><div class="stat-box-units">ms / iteration</div></div><div class="divider"></div><div class="stat-box"><div class="stat-box-type">MRI</div><div class="stat-box-number">82</div><div class="stat-box-units">ms / iteration</div></div></div></section><section><section data-markdown><textarea data-template>
              ### `String#scan`

`Regexp` pattern over 6.8MB of Unicode text ğŸ“š

```ruby
raise unless $fixture.scan(%r{https?://}).length == 3539+1865
raise unless $fixture.scan(/è¡¨è¾¾å¼/).length == 120
raise unless $fixture.scan(/\r\n/).empty?
```

            </textarea></section><section><h3><code>String#scan</code></h3><iframe src="/rubyconf/970907ce3a0cddcf6f8a250f3eb9a83d.txt" class="playground"></iframe></section></section><section><h3><code>String#scan</code></h3><div class="stat-container"><div class="stat-box stat-box-win"><div class="stat-box-type">Artichoke</div><div class="stat-box-number">48</div><div class="stat-box-units">ms / iteration</div></div><div class="divider"></div><div class="stat-box"><div class="stat-box-type">MRI</div><div class="stat-box-number">89</div><div class="stat-box-units">ms / iteration</div></div></div></section><section data-markdown><textarea data-template>
            ### Sparse Array Allocation

```ruby
a = []
a[1_000_000_000_000_000] = 'quadrillion'
a.concat((0..1000).to_a)

100.times do |i|
  a.unshift(i)
end

b = a.reverse
b[123_456_789, 500_000] = [Object.new, /Array/, 100.0]

puts a.length # => 1000000000001102
puts b.length # => 999999999501105
```

          </textarea></section><section><h3>Sparse Array Allocation</h3><div class="stat-container"><div class="stat-box stat-box-win"><div class="stat-box-type">Artichoke</div><div class="stat-box-number">7</div><div class="stat-box-units">MB / iteration</div></div><div class="divider"></div><div class="stat-box"><div class="stat-box-type">MRI</div><div class="stat-box-text">failed to allocate memory (<code>NoMemoryError</code>)</div><div class="stat-box-units"></div></div></div></section><section data-markdown><textarea data-template>
            ### Upcoming Core Work

- `Hash` with small vec backend ğŸ³
- `Range` and `Range`-based `Array` ğŸ¦‰
- `File` with in-memory and OS backends ğŸ§©

          </textarea></section><section><h3>Contributing</h3><p><a href="https://github.com/artichoke"><img class="github-logo" src="[object Module]" alt="GitHub"> github.com/artichoke</a></p><p><a href="https://artichoke.run">ğŸ¡ artichoke.run</a></p><p><a class="IssueLabel" style="background-color:#02e10c;color:#000" title="Call for participation: Experience needed to fix: Easy / not much." href="https://github.com/artichoke/artichoke/labels/E-easy">E-easy </a><a class="IssueLabel" style="background-color:#02e10c;color:#000" title="Call for participation: Help is requested to fix this issue." href="https://github.com/artichoke/artichoke/labels/E-help-wanted">E-help-wanted</a></p></section></div></div><div class="artichoke-chrome" style="display:none"><div class="header"><div class="header-tweet"><a href="https://twitter.com/intent/tweet?screen_name=artichokeruby&ref_src=twsrc%5Etfw" class="twitter-mention-button" data-size="large" data-show-count="false">Tweet to @artichokeruby</a></div><div></div><div class="header-logo"></div></div><div class="footer-logo"><a href="https://github.com/artichoke/artichoke" alt="Artichoke Ruby"><img src="https://www.artichokeruby.org/artichoke-logo.svg"></a></div></div><script src="/rubyconf/deck.2019.899d951981aa6b3378c5.bundle.js"></script></body></html>