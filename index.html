<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Artichoke is a Ruby Made with Rust ğŸ’ğŸ¦€</title><style>button{display:inline-block;border:none;padding:1rem 2rem;margin:0;text-decoration:none;background:#0069ed;color:#fff;font-family:sans-serif;font-size:1rem;cursor:pointer;text-align:center;transition:background 250ms ease-in-out,transform 150ms ease;-webkit-appearance:none;-moz-appearance:none}button:focus,button:hover{background:#0053ba}button:focus{outline:1px solid #fff;outline-offset:-4px}button:active{transform:scale(.99)}</style><link href="/rubyconf2019/dist/9669181afb5c722c2e29.css" rel="stylesheet"></head><body><div class="reveal"><div class="slides"><section data-markdown><textarea data-template>
## Artichoke is a Ruby Made with Rust

ğŸ’ğŸ¦€ğŸš€
 </textarea></section><section data-markdown><textarea data-template>
### What is Ruby?

ğŸ¤”ğŸ‘©â€ğŸ’»
 </textarea></section><section data-markdown><textarea data-template>
#### Syntax

```ruby
def dig(idx, *args)
  item = self[idx]
  if args.empty?
    item
  else
    item&.dig(*args)
  end
end
```
 </textarea></section><section data-markdown><textarea data-template>
#### Core Classes and Modules

```ruby
ary = Array.new(1024, 'Artichoke Ruby')
h = Hash[:conference, 'RubyConf', :year, 2019]
fixture = File.readlines(
  'artichoke-frontend/ruby/fixtures/learnxinyminutes.txt'
)
```
 </textarea></section><section data-markdown><textarea data-template>
#### Standard Library

```ruby
require 'forwardable'
require 'json'

class Properties
  extend Forwardable
  def_delegators :@properties, :[], :[]=, :to_json
  def initialize
    @properties = {}
  end
end
artichoke = Properties.new
artichoke[:lang] = 'Ruby'
artichoke[:impl] = 'Artichoke'

puts JSON.pretty_generate(artichoke)
```
 </textarea></section><section data-markdown><textarea data-template>
#### Behavior â€” ruby/spec

```ruby
describe "Regexp#named_captures" do
  it "returns a Hash" do
    /foo/.named_captures.should be_an_instance_of(Hash)
  end

  it "returns an empty Hash when there are no capture groups" do
    /foo/.named_captures.should == {}
  end

  it "sets the keys of the Hash to the names of the capture groups" do
    rex = /this (?<is>is) [aA] (?<pat>pate?rn)/
    rex.named_captures.keys.should == ['is','pat']
  end
end
```
</pat></is></textarea></section><section data-markdown><textarea data-template>
#### MRI C API

```c
mNokogiri         = rb_define_module("Nokogiri");
mNokogiriXml      = rb_define_module_under(mNokogiri, "XML");
mNokogiriHtml     = rb_define_module_under(mNokogiri, "HTML");
mNokogiriXslt     = rb_define_module_under(mNokogiri, "XSLT");
mNokogiriXmlSax   = rb_define_module_under(mNokogiriXml, "SAX");
mNokogiriHtmlSax  = rb_define_module_under(mNokogiriHtml, "SAX");
```
</textarea></section><section data-markdown><textarea data-template>
### Artichoke is Ruby

<p align="center">
  <img style="border:none" height="250" src="/dist/logo-red.svg">
</p>
</textarea></section><section data-markdown><textarea data-template>
### Where Can We Take Ruby?

ğŸš€ğŸ›°ğŸ’«â˜„ï¸
</textarea></section><section data-markdown><textarea data-template>
#### Single Binary Distribution

- Embed Standard Library into the `ruby` binary ğŸ§³
- _Statically linked_ Ruby app bundles â›“ğŸ
- Run Ruby in a `FROM scratch` Docker container ğŸ³
</textarea></section><section data-markdown><textarea data-template>
#### Optional Standard Library

- Control API surface area ğŸ›
- Faster startup ğŸ³
- Smaller deploy artifacts ğŸ”¬
</textarea></section><section data-markdown><textarea data-template>
#### Thread-Safe by Default

- Automatic synchronization across `Thread`s ğŸ¢ğŸ‡
- Transparent hoisting from local to shared heap ğŸ¥¾ğŸ¾
- An `Array` is a `Queue` ğŸ’
</textarea></section><section data-markdown><textarea data-template>
#### Optional Multi-Threading

- Disable synchronization at `ruby` compile time ğŸ”©
- Avoid perf hit, code bloat, and impl complexity â˜£ï¸
- Adapt Ruby to the ecosystem, e.g. ğŸ¦„ is prefork
</textarea></section><section data-markdown><textarea data-template>
#### Multiple Implementations of Core Classes

- DFA-based `Regexp` engines ğŸ¯
- Sparse, repeated, and aggregate `Array`s âš¡ï¸
- Small vec optimized `Hash` ğŸ£
- Sandboxed `IO` â›±
- In-memory filesystems ğŸ“‚
- Virtualized `ENV` ğŸ™ˆğŸ™Š
</textarea></section><section data-markdown><textarea data-template>
#### Increased Performance

- SIMD vectorization â†—ï¸ğŸ’¨
- Aggregate data structures ğŸ·ğŸº â• ğŸ¸ğŸ»
- Specialization ğŸ‘©â€âš•ï¸ğŸ‘©â€ğŸ³ğŸ‘©â€ğŸ«
- Const evaluation ğŸ§®
- Stuctural sharing, clone on write ğŸ¤
- Native JIT compilation ğŸ› 
- Event-loop powered multi-threading ğŸ§µ
- Function and block-local arenas ğŸŸ
- Dynamically initialized standard library ğŸ§¨
</textarea></section><section data-markdown><textarea data-template>
### Why Rust?

ğŸ¤©ğŸ‘©â€ğŸ­
</textarea></section><section data-markdown><textarea data-template>
#### Excellent FFI Support

- Enable implementing the entire MRI C API ğŸ’ª
- Aim to be a drop-in replacement for MRI when executing C extensions ğŸ¤¸â€â™€ï¸
</textarea></section><section data-markdown><textarea data-template>
#### `std` and Crate Ecosystem

- Very easy to use and build dependencies ğŸ
- Crates are high performance and high quality ğŸ…
- Rust development is fast and produces fast code ğŸ¤º
</textarea></section><section data-markdown><textarea data-template>
#### WebAssembly

- Rust natively builds to Wasm ğŸ•¸
- Ruby in the browser ğŸŒ
- Ruby in untrusted, sandboxed environments ğŸ•µï¸â€â™€ï¸
</textarea></section><section data-markdown><textarea data-template>
### Ruby in the Browser

[Artichoke Ruby Wasm Playground](https://artichoke.run)
</textarea></section><section><div class="fig-container" style="overflow:hidden" data-file="https://artichoke.run" data-style="height: 960px; width: 960px; margin-top: -64px;"></div></section></div></div><style type="text/css">.header{padding:5px;display:flex;flex-direction:row;align-content:space-between}.header-tweet{align-self:flex-start;width:50%}.header-logo{margin-left:auto;padding:5px;visibility:hidden}.footer-logo{position:absolute;bottom:0;left:0}.header img{max-width:100%!important;max-height:100%!important}</style><div id="hidden" style="display:none"><div id="header"><div class="header"><div class="header-tweet"><a href="https://twitter.com/intent/tweet?screen_name=artichokeruby&ref_src=twsrc%5Etfw" class="twitter-mention-button" data-size="large" data-show-count="false">Tweet to @artichokeruby</a><script src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div><div></div><div class="header-logo"></div></div><div class="footer-logo"><img src="/rubyconf2019/dist/logo.svg" height="125"></div></div></div><script type="text/javascript" src="/rubyconf2019/dist/9669181afb5c722c2e29.bundle.js"></script></body></html>